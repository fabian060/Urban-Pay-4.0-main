import{k as w,B as f}from"./endpoints.A-j0qYyd.js";import{c as m}from"./notificiation.DyHDLNjw.js";const p=document.querySelector("#signup-form"),n=document.querySelector("#email"),t=document.querySelector("#password"),a=document.querySelector("#verify-password"),o=document.querySelector("#house-number"),h=document.querySelector("#submit-button");document.querySelector("#email-helper");document.querySelector("#password-helper");document.querySelector("#verify-password-helper");document.querySelector("#house-number-helper");const y=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,V=/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&\-])[A-Za-z\d@$!%*#?&\-]{6,}$/,r={isEmailValid:!1,isPasswordValid:!1,doPasswordsMatch:!1,isHouseNumberValid:!1};function d(e,s,l){s?(e.classList.remove("border-red-500","dark:border-red-500"),e.classList.add("border-green-500","dark:border-green-500")):(e.classList.remove("border-green-500","dark:border-green-500"),e.classList.add("border-red-500","dark:border-red-500")),e.value===""&&e.classList.remove("border-red-500","dark:border-red-500","border-green-500","dark:border-green-500")}function u(){const{isEmailValid:e,isPasswordValid:s,doPasswordsMatch:l,isHouseNumberValid:c}=r;h.disabled=!e||!s||!l||!c}const S=/^[A-Z]-\d{2,3}$/;o.addEventListener("input",()=>{const e=S.test(o.value.trim());o.value=o.value.toUpperCase(),r.isHouseNumberValid=e,d(o,e),u()});n.addEventListener("input",()=>{const e=y.test(n.value);r.isEmailValid=e,d(n,e),u()});t.addEventListener("input",()=>{const e=V.test(t.value);r.isPasswordValid=e,d(t,e);const s=t.value===a.value&&a.value.length>0;r.doPasswordsMatch=s,d(a,s),u()});a.addEventListener("input",()=>{const e=t.value===a.value&&a.value.length>0;r.doPasswordsMatch=e,d(a,e),u()});p.addEventListener("submit",async e=>{e.preventDefault();const{isEmailValid:s,isPasswordValid:l,doPasswordsMatch:c,isHouseNumberValid:v}=r;if(!(!s||!l||!c||!v))try{await w.post(`${f}/api/users`,{json:{email:n.value,passwordHash:t.value,house_number:o.value}});for(const i in r)r[i]=!1;p.reset(),[n,t,a,o].forEach(i=>{d(i)}),u(),m({title:"Usuario creado!",description:"Se ha enviado un correo de verificacion a su bandeja de correo",type:"success"})}catch(i){const b=await i?.response?.json();m({title:"Ups! Hubo un error",description:b?.error??"Sin mensaje",type:"error"})}});
