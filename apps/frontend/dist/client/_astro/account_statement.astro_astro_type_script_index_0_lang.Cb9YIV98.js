import{k as u,B as p}from"./endpoints.A-j0qYyd.js";const m=document.querySelector("#cuotas-pendientes-list"),g=document.querySelector("#pendientes-loading"),y=document.querySelector("#pendientes-error"),f=document.querySelector("#pendientes-empty"),w=document.querySelector("#cuotas-pagadas-list"),x=document.querySelector("#pagadas-loading"),h=document.querySelector("#pagadas-error"),v=document.querySelector("#pagadas-empty");async function C(){try{g.classList.remove("hidden"),y.classList.add("hidden"),f.classList.add("hidden"),m.innerHTML="",x.classList.remove("hidden"),h.classList.add("hidden"),v.classList.add("hidden"),w.innerHTML="";const d=document.getElementById("resumen-cantidad"),o=document.getElementById("resumen-ultima"),l=document.getElementById("resumen-total"),[i,L]=await Promise.all([u.get(`${p}/api/cuotas`,{credentials:"include"}).json(),u.get(`${p}/api/payment`,{credentials:"include"}).json()]),c=L.filter(e=>e.status==="accepted"),r=c.map(e=>e.cuota_id),a=i.filter(e=>r.includes(e.id));if(a.length===0)v.classList.remove("hidden");else{a.sort((e,t)=>new Date(e.date)-new Date(t.date));for(const e of a){const t=c.find(b=>b.cuota_id===e.id),$=t?t.status:"",s=document.createElement("li");s.className="flex gap-4 justify-between items-center",s.innerHTML=`
                    <div class="flex flex-wrap md:flex-nowrap gap-2 flex-grow">
                      <input class="w-full bg-green-600 rounded-md p-2 outline-none" type="text" value="${e.description}" readonly>
                      <input class="w-full bg-green-600 rounded-md p-2 outline-none" type="text" value="${e.date.split("T")[0]}" readonly>
                      <input class="w-full bg-green-600 rounded-md p-2 outline-none" type="text" value="${e.date_limit.split("T")[0]}" readonly>
                      <input class="w-full bg-green-600 rounded-md p-2 outline-none" type="text" value="${e.monto}" readonly>
                      <input class="w-full bg-green-600 rounded-md p-2 outline-none font-bold" type="text" value="${$}" readonly>
                    </div>
                  `,w.appendChild(s)}}const n=i.filter(e=>!r.includes(e.id));if(d.textContent=n.length,n.length>0?(n.sort((e,t)=>new Date(t.date)-new Date(e.date)),o.textContent=n[0].monto+"$",l.textContent=n.reduce((e,t)=>e+Number(t.monto),0)+"$"):(o.textContent="-",l.textContent="0$"),n.length===0)f.classList.remove("hidden");else{n.sort((e,t)=>new Date(e.date)-new Date(t.date));for(const e of n){const t=document.createElement("li");t.className="flex gap-4 justify-between items-center",t.innerHTML=`
                    <div class="flex flex-wrap md:flex-nowrap gap-2 flex-grow">
                      <input class="w-full bg-gray-500 rounded-md p-2 outline-none" type="text" value="${e.description}" readonly>
                      <input class="w-full bg-gray-500 rounded-md p-2 outline-none" type="text" value="${e.date.split("T")[0]}" readonly>
                      <input class="w-full bg-gray-500 rounded-md p-2 outline-none" type="text" value="${e.date_limit.split("T")[0]}" readonly>
                      <input class="w-full bg-gray-500 rounded-md p-2 outline-none" type="text" value="${e.monto}" readonly>
                    </div>
                  `,m.appendChild(t)}}}catch{y.classList.remove("hidden"),h.classList.remove("hidden")}finally{g.classList.add("hidden"),x.classList.add("hidden")}}C();
