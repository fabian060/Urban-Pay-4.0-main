import{k as g,B as y}from"./endpoints.JZqDPgRs.js";const w=document.querySelector("#cuotas-pendientes-list"),f=document.querySelector("#pendientes-loading"),x=document.querySelector("#pendientes-error"),h=document.querySelector("#pendientes-empty"),v=document.querySelector("#cuotas-pagadas-list"),L=document.querySelector("#pagadas-loading"),$=document.querySelector("#pagadas-error"),b=document.querySelector("#pagadas-empty");async function D(){try{f.classList.remove("hidden"),x.classList.add("hidden"),h.classList.add("hidden"),w.innerHTML="",L.classList.remove("hidden"),$.classList.add("hidden"),b.classList.add("hidden"),v.innerHTML="";const i=document.getElementById("resumen-cantidad"),c=document.getElementById("resumen-ultima"),r=document.getElementById("resumen-total"),[u,C]=await Promise.all([g.get(`${y}/api/cuotas`,{credentials:"include"}).json(),g.get(`${y}/api/payment`,{credentials:"include"}).json()]),p=C.filter(e=>e.status==="accepted"),m=p.map(e=>e.cuota_id),o=u.filter(e=>m.includes(e.id));if(o.length===0)b.classList.remove("hidden");else{o.sort((e,t)=>new Date(e.date)-new Date(t.date));for(const e of o){const t=p.find(a=>a.cuota_id===e.id),s=t?t.status:"",d=document.createElement("li");d.className="flex gap-4 justify-between items-center",d.innerHTML=`
                    <div class="flex flex-wrap md:flex-nowrap gap-2 flex-grow">
                      <input class="w-full bg-green-600 rounded-md p-2 outline-none text-white" type="text" value="${e.description}" readonly>
                      <input class="w-full bg-green-600 rounded-md p-2 outline-none text-white" type="text" value="${e.date.split("T")[0]}" readonly>
                      <input class="w-full bg-green-600 rounded-md p-2 outline-none text-white" type="text" value="${e.date_limit.split("T")[0]}" readonly>
                      <input class="w-full bg-green-600 rounded-md p-2 outline-none text-white" type="text" value="${e.monto}" readonly>
                      <input class="w-full bg-green-600 rounded-md p-2 outline-none text-white" type="text" value="${s}" readonly>
                    </div>
                  `,v.appendChild(d)}}const n=u.filter(e=>!m.includes(e.id));if(i.textContent=n.length,n.length>0?(n.sort((e,t)=>new Date(t.date)-new Date(e.date)),c.textContent=n[0].monto+"$",r.textContent=n.reduce((e,t)=>e+Number(t.monto),0)+"$"):(c.textContent="-",r.textContent="0$"),n.length===0)h.classList.remove("hidden");else{n.sort((t,s)=>new Date(t.date)-new Date(s.date));const e=new Date;for(const t of n){const a=new Date(t.date_limit)<e?"bg-red-600":"bg-gray-600",l=document.createElement("li");l.className="flex gap-4 justify-between items-center",l.innerHTML=`
                    <div class="flex flex-wrap md:flex-nowrap gap-2 flex-grow">
                      <input class="w-full ${a} rounded-md p-2 outline-none text-white" type="text" value="${t.description}" readonly>
                      <input class="w-full ${a} rounded-md p-2 outline-none text-white" type="text" value="${t.date.split("T")[0]}" readonly>
                      <input class="w-full ${a} rounded-md p-2 outline-none text-white" type="text" value="${t.date_limit.split("T")[0]}" readonly>
                      <input class="w-full ${a} rounded-md p-2 outline-none text-white" type="text" value="${t.monto}" readonly>
                    </div>
                  `,w.appendChild(l)}}}catch{x.classList.remove("hidden"),$.classList.remove("hidden")}finally{f.classList.add("hidden"),L.classList.add("hidden")}}D();
