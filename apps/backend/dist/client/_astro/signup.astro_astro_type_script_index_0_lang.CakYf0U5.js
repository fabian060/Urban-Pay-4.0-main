import{k as f,B as v}from"./endpoints.JZqDPgRs.js";import{c as p}from"./notificiation.C3UD7vwj.js";const m=document.querySelector("#signup-form"),n=document.querySelector("#email"),r=document.querySelector("#password"),s=document.querySelector("#verify-password"),a=document.querySelector("#house-number"),b=document.querySelector("#submit-button"),g=document.querySelector("#toggle-password"),h=document.querySelector("#eye-icon-password"),V=document.querySelector("#eye-off-icon-password"),S=document.querySelector("#toggle-verify-password"),q=document.querySelector("#eye-icon-verify"),L=document.querySelector("#eye-off-icon-verify");document.querySelector("#email-helper");document.querySelector("#password-helper");document.querySelector("#verify-password-helper");document.querySelector("#house-number-helper");const P=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,k=/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&\-])[A-Za-z\d@$!%*#?&\-]{6,}$/,o={isEmailValid:!1,isPasswordValid:!1,doPasswordsMatch:!1,isHouseNumberValid:!1};function d(e,t,l){t?(e.classList.remove("border-red-500","dark:border-red-500"),e.classList.add("border-green-500","dark:border-green-500")):(e.classList.remove("border-green-500","dark:border-green-500"),e.classList.add("border-red-500","dark:border-red-500")),e.value===""&&e.classList.remove("border-red-500","dark:border-red-500","border-green-500","dark:border-green-500")}g?.addEventListener("click",()=>{const e=r.getAttribute("type")==="password"?"text":"password";r.setAttribute("type",e),h.classList.toggle("hidden"),V.classList.toggle("hidden")});S?.addEventListener("click",()=>{const e=s.getAttribute("type")==="password"?"text":"password";s.setAttribute("type",e),q.classList.toggle("hidden"),L.classList.toggle("hidden")});function c(){const{isEmailValid:e,isPasswordValid:t,doPasswordsMatch:l,isHouseNumberValid:u}=o;b.disabled=!e||!t||!l||!u}const I=/^[A-Z]-\d{2,3}$/;a.addEventListener("input",()=>{const e=I.test(a.value.trim());a.value=a.value.toUpperCase(),o.isHouseNumberValid=e,d(a,e),c()});n.addEventListener("input",()=>{const e=P.test(n.value);o.isEmailValid=e,d(n,e),c()});r.addEventListener("input",()=>{const e=k.test(r.value);o.isPasswordValid=e,d(r,e);const t=r.value===s.value&&s.value.length>0;o.doPasswordsMatch=t,d(s,t),c()});s.addEventListener("input",()=>{const e=r.value===s.value&&s.value.length>0;o.doPasswordsMatch=e,d(s,e),c()});m.addEventListener("submit",async e=>{e.preventDefault();const{isEmailValid:t,isPasswordValid:l,doPasswordsMatch:u,isHouseNumberValid:y}=o;if(!(!t||!l||!u||!y))try{await f.post(`${v}/api/users`,{json:{email:n.value,passwordHash:r.value,house_number:a.value}});for(const i in o)o[i]=!1;m.reset(),[n,r,s,a].forEach(i=>{d(i)}),c(),p({title:"Usuario creado!",description:"Se ha enviado un correo de verificacion a su bandeja de correo",type:"success"})}catch(i){const w=await i?.response?.json();p({title:"Ups! Hubo un error",description:w?.error??"Sin mensaje",type:"error"})}});
