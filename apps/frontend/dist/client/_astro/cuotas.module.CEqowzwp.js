import{c as a}from"./notificiation.DyHDLNjw.js";import{k as c,B as i}from"./endpoints.A-j0qYyd.js";import{a as l}from"./index.CViUNx8d.js";const n=`${i}/api/cuotas`;let d=[];const r=l(d),u=async()=>{try{const e=await c.get(`${i}/api/cuotas`,{credentials:"include"}).json();r.set(e)}catch(e){(e.response.status===401||e.response.status===403)&&location.replace("/login"),console.log(e)}},p=async e=>{try{const o={...e,date_limit:e.date_limit||e.dateLimit};delete o.dateLimit;const t=await c.post(n,{json:o,credentials:"include"}).json();r.set(r.get().concat(t)),a({title:"Cuota creada!",type:"success"})}catch(o){console.log(o);const t=await o.response.json();a({title:"Ups! Hubo un error",description:t.error,type:"error"})}},y=async e=>{const o=`${n}/${e}`;try{const t=await c.delete(o,{credentials:"include"}).json();r.set(r.get().filter(s=>s.id!==t.id)),a({title:"Cuota eliminada",description:`${t.name}`,type:"success"})}catch(t){console.log(t);const s=await t.response.json();a({title:"Ups! Hubo un error",description:s.error,type:"error"})}},m=async e=>{const o=`${n}/${e.id}`;try{const t=await c.put(o,{json:e,credentials:"include"}).json();r.set(r.get().map(s=>s.id===t.id?t:s)),a({title:"Cuota actualizado",description:`${t.description}`,type:"success"})}catch(t){console.log(t);const s=await t.response.json();a({title:"Ups! Hubo un error",description:s.error,type:"error"})}},$={addCuota:p,removeCuota:y,updateCuota:m,getCuotas:u};export{$ as C,r as c};
