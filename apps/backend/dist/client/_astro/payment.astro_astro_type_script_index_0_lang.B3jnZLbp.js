import{k as V,B as b}from"./endpoints.JZqDPgRs.js";import{c as m}from"./notificiation.C3UD7vwj.js";const y=document.querySelector("#signup-form"),r=document.querySelector("#date"),n=document.querySelector("#payment_method"),s=document.querySelector("#payment_reference"),d=document.querySelector("#monto"),E=document.querySelector("#submit-button"),h=/^\d{4}$/,P=/^\d{4}-\d{2}-\d{2}$/,k=/^\d+(\.\d{1,2})?$/,t={isDateValid:!1,isPaymentMethodValid:!1,isPaymentReferenceValid:!1,isMontoValid:!1};r.addEventListener("click",()=>{r.showPicker()});function i(e,a,l){a?(e.classList.remove("border-red-500","dark:border-red-500"),e.classList.add("border-green-500","dark:border-green-500")):(e.classList.remove("border-green-500","dark:border-green-500"),e.classList.add("border-red-500","dark:border-red-500")),e.value===""&&e.classList.remove("border-red-500","dark:border-red-500","border-green-500","dark:border-green-500")}function c(){const{isDateValid:e,isPaymentMethodValid:a,isPaymentReferenceValid:l,isMontoValid:u}=t;E.disabled=!e||!a||!l||!u}n.addEventListener("change",()=>{const e=n.value!=="";t.isPaymentMethodValid=e,i(n,e),c()});r.addEventListener("input",()=>{const e=P.test(r.value);t.isDateValid=e,i(r,e),c()});s.addEventListener("input",()=>{const e=h.test(s.value);t.isPaymentReferenceValid=e,i(s,e),c()});d.addEventListener("input",()=>{const e=k.test(d.value);t.isMontoValid=e,i(d,e),c()});y.addEventListener("submit",async e=>{e.preventDefault();const{isDateValid:a,isPaymentMethodValid:l,isPaymentReferenceValid:u,isMontoValid:p}=t;if(!a||!l||!u||!p)return;const f={date:r.value,payment_reference:s.value,cuota_id:null,payment_methods_id:n.value,monto:d.value};try{await V.post(`${b}/api/payment`,{json:f,credentials:"include"});for(const o in t)t[o]=!1;y.reset(),[r,n,s,d].forEach(o=>{i(o)}),c(),m({title:"Pago reportado exitosamente!",description:"Nuestro equipo revisara el pago.",type:"success"})}catch(o){const v=await o?.response?.json();m({title:"Ups! Hubo un error",description:v?.error??"Sin mensaje",type:"error"})}});
